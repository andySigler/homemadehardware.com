<!DOCTYPE html>
<html>
    <head>
        <title>Homemade Hardware</title>
        <link rel="stylesheet" href="../../css/main.css">
        <link rel="icon" href="../../img/favicon.ico" type="image/x-icon">
        <link rel="shortcut icon" href="../../img/favicon.ico" type="image/x-icon">
        <meta name=viewport content="width=device-width, initial-scale=1">
        <style type="text/css">
            img{
                border: 1px solid grey;
                border-radius: 3px;
                max-width:100%;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="headerSection">
                <div class="websiteTitleDiv">
                    <a href="../../">
                        <h1 class="websiteTitle">
                            Homemade Hardware
                        </h1>
                    </a>
                    <p class="personalLink">
                        <a target="_blank" href="http://andysigler.com">andysigler.com</a>
                    </p>
                </div>
                <div class="navBar" style="margin-left:-5px">
                    <a class="navUnit navSelected" href="../..">Guides</a>
                    <a class="navUnit" href="../../things/">Tools/Materials</a>
                    <a class="navUnit" href="../../syllabus">Syllabus(2021)</a>
                </div>
            </div>
            <div class="bodySection">
                <div class="contentBlock">
                    <h2>Bantam Milling - 2</h2>
                    <div class="headerImage" style="background-image: url('../../img/guide-header-bantam-milling-2.jpg')"></div>
                    <p>
                        This guide is part 2 of making PCBs with the Bantam milling machine. We will be focusing on making double-sided boards, and milling SVG files.
                    </p>
                    <p>
                        If you have not yet gone through the <a href="../bantam-setup">Bantam Setup guide</a>, you must go through that guide first before moving on to this one. Also the <a href="../bantam-setup">Bantam Milling - 1</a> guide describes milling a single-sided PCB for the first time.
                    </p>
                    <ol>
                        <li><a href="#engrave-an-image">Engrave an Image</a></li>
                        <li><a href="#doubled-sided-boards">Double Sided Boards</a></li>
                        <li><a href="#accurate-ground-planes">Accurate Ground Planes</a></li>
                    </ol>
                </div>
                <div class="contentBlock" id="engrave-an-image">
                    <h3>Engrave an Image</h3>
                    <p>
                        Bantam is able to not only mill Eagle files, but it can also mill from SVG files. This means that, for example, we could create a drawing in Adobe Illustrator, and open it in Bantam to mill that drawing on our PCB.
                    </p>
                    <p>
                        Let's say I have a file open in Bantam, to mill the top of a PCB.
                    </p>
                    <p>
                        That empty section on the right looks lonely. Let's add a drawing to it.
                    </p>
                    <img src="../../img/bantam-svg-only-eagle.png">
                    <p>
                        If found an SVG of Homer Simpsons face online. I'd like to add this to the PCB.
                    </p>
                    <img src="../../img/bantam-svg-homer.png">
                    <p>
                        In Bantam, I can open the SVG file just like I would an Eagle file. It will show up as a new file, with some options we haven't seen before.
                    </p>
                    <img src="../../img/bantam-svg-load-bantam.png">
                    <p>
                        <strong>NOTE:</strong> the Bantam app expects SVG version <strong>1.0</strong>, if it is not <strong>1.0</strong> then some pieces of the design may be missing.
                    </p>
                    <p>
                        One of the new options allows us to "scale" the size of an image (as a percentage). I'm going to shrink this image so it is small enough to fit on the PCB.
                    </p>
                    <img src="../../img/bantam-svg-homer-scaled.png">
                    <p>
                        Next I am going to de-select the <strong>Cutout</strong> button in the "Parts to Mill" section.
                    </p>
                    <p>
                        I do not want to cut through the board around Homer, I just want to engrave his face.
                    </p>
                    <img src="../../img/bantam-svg-homer-no-cutout.png">
                    <p>
                        Then finally, I'll change it's position so that it fits inside my PCB, in a safe area.
                    </p>
                    <img src="../../img/bantam-svg-homer-positioned.png">
                    <p>
                        Now you can mill the drawing, just like you would mill an Eagle file.
                    </p>
                </div>
                <div class="contentBlock" id="doubled-sided-boards">
                    <h3>Double Sided Boards</h3>
                    <p>
                        We can mill a double-sided PCB design on the Bantam milling machine, by simply flipping the board over to mill the back.
                    </p>
                    <p>
                        However, there are some important steps to be take to be sure it is accurate.
                    </p>
                    <p>
                        To start, you <strong>must</strong> use the PCB bracket when milling a double sided board. You also must have gone through the brack probing process as described in the <a href="../bantam-setup">Bantam Setup guide.</a>
                    </p>
                    <p>
                        Then, when milling the top side, make sure the PCB material was <strong>pushed</strong> into the bottom-left corner of the brack.
                    </p>
                    <img src="../../img/bantam-double-top-push-corner.jpg">
                    <p>
                        Do <strong>not</strong> mill the board cutout when milling the top of the PCB. We need to keep the entire PCB material uncut, so we can rotate it.
                    </p>
                    <p>
                        After milling the top side, you can remove your PCB just like you normally would when milling a single-sided PCB.
                    </p>
                    <img src="../../img/bantam-double-remove-copper.jpg">
                    <p>
                        Remove the tape from the bottom.
                    </p>
                    <p>
                        We will now be putting tape on the top of the board (where the routes were just cut). Before adding tape, clean the top with 91% isopropyl alcohol.
                    </p>
                    <p>
                        Also, do not forget to clean the Bantam's aluminum bed with the 91% isopropyl alcohol too. Don't let any small pieces of dirt, or old pieces of tape, stay there.
                    </p>
                    <img src="../../img/bantam-double-clean-copper.jpg">
                    <p>
                        Then add double-sided permanent tape over the milled PCB top layer.
                    </p>
                    <img src="../../img/bantam-double-add-tape.jpg">
                    <p>
                        Now, on the Bantam, place the copper board so that your milled design is in the <strong>bottom-right</strong> corner now.
                    </p>
                    <img src="../../img/bantam-double-pcb-on-bottom.jpg">
                    <p>
                        With the top layer facing down, <strong>push</strong> the corner of the PCB material into the bracket.
                    </p>
                    <p>
                        <strong>This is very important</strong>, because it is this alignment that will make your bottom milled layer align perfectly with your top milled layer.
                    </p>
                    <img src="../../img/bantam-double-bottom-push-corner.jpg">
                    <p>
                        Press the copper board down so that is it fully stuck. We do not want it to move while we are milling.
                    </p>
                    <p>
                        In the Bantam software, we need to tell it that we are now going to mill the bottom of our PCB.
                    </p>
                    <img src="../../img/bantam-double-app-top.png">
                    <p>
                        In the file section on the right, find the switch that changes between "top" and "bottom". By default it will be in the "top" position, and clicking it changes to "bottom".
                    </p>
                    <p>
                        Try clicking this a few times. You will see that the board in the app not only flips horizontally to show the bottom, but it also moves the board to press again the <strong>right</strong> side of the backet (instead of the left side like for the top).
                    </p>
                    <img src="../../img/bantam-double-app-bottom.png">
                    <p>
                        Once it is flipped, you can proceed with milling just like you normally would (as described in the <a href="../bantam-milling-1">Bantam Milling 1 guide</a>).
                    </p>
                    <p>
                        After milling, I can see the bottom routes, holes, and cutout look good.
                    </p>
                    <img src="../../img/bantam-double-bottom-finished.jpg">
                    <p>
                        And now, the most important moment, when we can see if our top layer lines up with the holes.
                    </p>
                    <p>
                        When I flip my board over, I can see that the holes are a tiny bit off center, but I think they are good enough to use (yay!).
                    </p>
                    <img src="../../img/bantam-double-removed-finished.jpg">
                </div>
                <div class="contentBlock" id="accurate-ground-planes">
                    <h3>Accurate Ground Planes</h3>
                    <p>
                        The Bantam software has this one issue that can be bad for some PCB: it ignores your ground plane shape. Regardless of where you put your ground plane, the Bantam will leave extra copper all over the board.
                    </p>
                    <p>
                        To visualize what I'm talking about, lets take a look at a board design that I want to mill.
                    </p>
                    <img style="max-width: 46.5%" src="../../img/bantam-ground-plane-eagle-outline.png">
                    <img style="max-width: 49.5%" src="../../img/bantam-ground-plane-eagle-filled.png">
                    <p>
                        This board is designed to fit into a USB-A connector (like on a computer).
                    </p>
                    <p>
                        Because the USB portion will be going inside my computer, I do <strong>not</strong> want any copper on top or bottom of the USB section (except the USB pads themselves).
                    </p>
                    <p>
                        Extra copper might cause a short-circuit inside my computer (ouch!).
                    </p>
                    <p>
                        That is why I placed a ground plane (both top and bottom layers) that does <strong>not</strong> go over the USB section of the board (on the left side).
                    </p>
                    <p>
                        However, in the Bantam software, the PCB looks like the picture below. The picture below shows the <strong>bottom</strong> of the board, so it is flipped over. The USB connector is now on the <strong>right</strong> side (because it flipped over).
                    </p>
                    <img src="../../img/bantam-ground-plane-bantam-bad.png">
                    <p>
                        <strong>There is copper underneath the USB connector!</strong> In my Eagle file, there is no copper there, but the Bantam software ignores this and just leave copper untouched there.
                    </p>
                    <p>
                        This would be dangerous for me, so I need to figure out how to mill my ground plane accurately so my project doesn't break my computer's USB ports.
                    </p>
                    <p>
                        To solve this, I can create an SVG file from my Eagle file, and then use that SVG file in Bantam to mill my accurate ground plane.
                    </p>
                    <p>
                        First, I need to turn my Eagle file into an image.
                    </p>
                    <p>
                        Before creating an image, I want to show only the layers that are a part of the bottom copper layer (bottom, vias, and pads), and I'll include the cutout dimension layer too so there is a border.
                    </p>

                    <img src="../../img/bantam-ground-eagle-show-copper-layers.png">
                    <p>
                        Now in my board, I can only see copper on the bottom, and the board cutout.
                    </p>
                    <img src="../../img/bantam-ground-eagle-show-copper-layers-design.png">
                    <p>
                        Next, I'll go to <strong>File -> Print</strong>, and it is here that we can export a PDF file.
                    </p>
                    <img src="../../img/bantam-ground-eagle-print-options.png">
                    <p>
                        In the print options window, select your destination to be a local PDF file.
                    </p>
                    <p>
                        First, sure the "scale" of the image is 1 (as in "100%"). If this number does not equal 1, then your image will not be an accurate size.
                    </p>
                    <p>
                        Second, in the checkboxes below, select "Solid" and "Black".
                    </p>
                    <p>
                        Finally, if you are printing a bottom layer (like I am right now), then click the "Mirror" checkbox. However, if you are printing the top layer, then leave the "Mirror" checkbox un-selected.
                    </p>
                    <p>
                        Now I'm going to open this new PDF file in Adobe Illustrator.
                    </p>
                    <img src="../../img/bantam-ground-illustrator-pdf.png">
                    <p>
                        Before doing anything, we're going to pull all the vector paths out of the nested groups/clips that the PDF file created. And we're going to get all those paths to the top-most layer in Illustrator (this will make it easier to edit them later).
                    </p>
                    <p>
                        This edit is made with the <strong>Windows -> Layers</strong> window.
                    </p>
                    <img src="../../img/bantam-ground-illustrator-layers.png">
                    <p>
                        Then, before we get too far, let's create an SVG file. Go to <strong>File -> Save As...</strong>, and select the SVG file format.
                    </p>
                    <img src="../../img/bantam-ground-illustrator-save-svg.png">
                    <p>
                        Before the SVG is generated, Illustrator gives you some options specific to SVG files. Select the SVG version <strong>1.0</strong> from the dropdown menu before saving.
                    </p>
                    <img src="../../img/illustrator-svg-version-1.png">
                    <p>
                        <strong>NOTE:</strong> the Bantam app expects SVG version <strong>1.0</strong>, if it is not <strong>1.0</strong> then some pieces of the design may be missing.
                    </p>
                    <p>
                        Let's load it into Bantam and see what it looks like.
                    </p>
                    <img src="../../img/bantam-ground-bantam-ugly.png">
                    <p>
                        That looks bad! We need to play with the file settings to make it look better.
                    </p>
                    <p>
                        First, I can see that Bantam does not see the outline of the PCB. See how it thinks the cutout is around the routes, and not the actual board cutout.
                    </p>
                    <p>
                        That is because the cutout lines, in Illustrator, have a stroke weight of 0 (zero). In Illustrator, I'll set the cutout lines to have a stroke weight of 0.1pt, and then reload it in Bantam.
                    </p>
                    <img src="../../img/bantam-ground-illustrator-stroke-weight.png">
                    <p>
                        Now when I re-load it in Bantam, it looks much better. I can see the real board cutout.
                    </p>
                    <img src="../../img/bantam-ground-bantam-cutout-good.png">
                    <p>
                        There is another big problem: Bantam is milling the <strong>opposite</strong> of what we actually want to mill. I want it to mill <strong>around</strong> my routes, but Bantam right now is saying it will mill <strong>inside</strong> my routes.
                    </p>
                    <p>
                        This can be changed in the "Advanced" section for the file in Bantam. Then, in the "Invert" dropdown menu, select <strong>Yes, within cutout</strong>.
                    </p>
                    <img src="../../img/bantam-ground-bantam-advanced-inverse.png">
                    <p>
                        Much better!
                    </p>
                    <p>
                        There is one last problem with our file. If I zoom in to the design in Bantam, I notice that all the <strong>square</strong> or <strong>rectangular</strong> copper pads are being ignored (why???).
                    </p>
                    <img src="../../img/bantam-ground-ignore-squares.png">
                    <p>
                        There are two things happening to create this:
                        <ol>
                            <li>When Eagle exports a PDF, it creates two paths for each square, one that is filled and another that has no fill</li>
                            <li>Bantam will ignore any square that has two squares stacked on top each other (I don't know why).</li>
                        </ol>
                    </p>
                    <p>
                        So, in Illustrator, I'll first highlight the <strong>filled</strong> squares. I'm being careful not to select and highlight the borders of these squares.
                    </p>
                    <img src="../../img/bantam-ground-illustrator-squares-highlight.png">
                    <p>
                        After highlighting, I delete all the filled squares, so that now I only see the squares that have the thin outline.
                    </p>
                    <img src="../../img/bantam-ground-illustrator-squares-delete.png">
                    <p>
                        Finally, highlight the remaining squares with strokes, and now give them all a solid black fill.
                    </p>
                    <img src="../../img/bantam-ground-illustrator-squares-fill.png">
                    <p>
                        Re-load the SVG file in Bantam, and now you will be able to see the square copper pads.
                    </p>
                    <img src="../../img/bantam-ground-bantam-squares-correct.png">
                    <p>
                        The last and final step is to manually line up the SVG file with your BRD file.
                    </p>
                    <p>
                        The easiest way to to do this is to:
                        <ul>
                            <li>Hide the Cutout from the SVG file (you can cutout using the BRD file)</li>
                            <li>Hide the Traces from the BRD file (you will cut traces using the SVG file)</li>
                            <li><strong>Show</strong> the BRD's Holes and Cutout toolpaths</li>
                            <li><strong>Show</strong> the SVG's Engraving toolpath</li>
                        </ul>
                    </p>
                    <p>
                        And then, adjust the SVG file's millimeter position, until the holes perfectly line up.
                    </p>
                    <a href="../../img/bantam-ground-line-up-files.png"><img src="../../img/bantam-ground-line-up-files.png"></a>
                    <p>
                        Now our ground plane is exactly as we designed in the Eagle file (Huzzah!!!).
                    </p>
                </div>
            </div>
            <div class="footerSection">
                <a target="_blank" href="http://andysigler.com">andysigler.com</a>
            </div>
        </div>
    </body>
</html>
